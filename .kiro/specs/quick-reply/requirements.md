# 快捷回复功能需求文档

## 简介

快捷回复功能是 WhatsApp 桌面客户端的核心功能模块，旨在提升客服人员的工作效率。该功能允许用户预先创建、管理和快速发送常用的回复内容，支持多种媒体类型（文本、图片、音频、视频等），并与翻译系统深度集成，实现原文或翻译后的一键发送。

## 术语表

- **快捷回复系统（Quick Reply System）**：整个快捷回复功能的总称，包括内容管理、分组管理、发送控制等子系统
- **回复模板（Reply Template）**：用户预先创建的可重复使用的回复内容，可包含文本、图片、音频、视频等多种媒体类型
- **分组（Group）**：用于组织和分类回复模板的容器，支持层级结构
- **媒体类型（Media Type）**：回复模板支持的内容类型，包括文本、图片、音频、视频、图文混合、名片
- **发送模式（Send Mode）**：回复内容的发送方式，包括原文发送和翻译后发送两种模式
- **翻译引擎（Translation Engine）**：执行翻译任务的服务，包括谷歌翻译、GPT-4、Gemini、DeepSeek 等
- **输入框插入（Input Box Insertion）**：将快捷回复内容插入到聊天输入框中，而不是直接发送
- **一键发送（One-Click Send）**：直接将快捷回复内容发送给当前聊天对象，无需经过输入框
- **模板导入导出（Template Import/Export）**：将快捷回复模板以文件形式导入或导出，便于备份和共享
- **关键词搜索（Keyword Search）**：通过输入关键词快速定位和筛选回复模板
- **操作面板（Operation Panel）**：显示在聊天界面右侧的快捷回复面板，用于快速选择和发送回复
- **管理界面（Management Interface）**：独立的窗口界面，用于预先设置、创建、编辑、删除和组织回复模板
- **账号级配置（Account-Level Configuration）**：每个 WhatsApp 账号拥有独立的快捷回复配置和模板库
- **模板标签（Template Label）**：用户为模板添加的自定义备注信息，用于标识和描述模板内容

## 需求

### 需求 1：快捷回复操作面板访问

**用户故事**：作为客服人员，我希望能够在聊天界面快速访问快捷回复功能，以便在聊天过程中高效使用预设的回复内容。

#### 验收标准

1. WHEN 用户点击主界面右侧的"快捷回复"图标 THEN 快捷回复系统 SHALL 在聊天界面右侧打开快捷回复操作面板
2. WHEN 快捷回复操作面板打开 THEN 快捷回复系统 SHALL 在顶部显示标题"快捷回复"和工具栏图标（刷新、编辑管理、复制、设置菜单）
3. WHEN 快捷回复操作面板打开 THEN 快捷回复系统 SHALL 在标题下方显示发送模式选择，包含"原文发送"和"翻译后发送"两个单选按钮
4. WHEN 快捷回复操作面板打开 THEN 快捷回复系统 SHALL 在发送模式下方显示搜索框，占位符文字为"请输入关键词"
5. WHEN 快捷回复操作面板打开 THEN 快捷回复系统 SHALL 在搜索框下方显示分组和模板列表
6. WHEN 用户点击其他侧边栏功能图标（如环境配置、翻译设置等）THEN 快捷回复系统 SHALL 关闭快捷回复操作面板并显示对应功能面板
7. WHEN 快捷回复操作面板打开 THEN 快捷回复系统 SHALL 占据聊天界面右侧约 30% 的宽度

### 需求 2：回复模板分组管理

**用户故事**：作为客服人员，我希望能够创建和管理回复模板的分组，以便更好地组织大量的快捷回复内容。

#### 验收标准

1. WHEN 用户在管理界面点击"新建分组"按钮 THEN 快捷回复系统 SHALL 创建一个新的空分组，默认名称为"新分组"，并允许用户修改分组名称
2. WHEN 用户输入分组名称并确认 THEN 快捷回复系统 SHALL 保存该分组并在分组列表中显示
3. WHEN 用户点击分组名称旁的编辑图标 THEN 快捷回复系统 SHALL 允许用户修改分组名称
4. WHEN 用户点击分组名称旁的删除图标 THEN 快捷回复系统 SHALL 显示确认对话框，询问是否删除该分组及其包含的所有模板
5. WHEN 用户确认删除分组 THEN 快捷回复系统 SHALL 删除该分组及其包含的所有回复模板
6. WHEN 用户在操作面板点击分组名称左侧的箭头图标 THEN 快捷回复系统 SHALL 切换该分组的展开/折叠状态
7. WHEN 分组为空 THEN 快捷回复系统 SHALL 在分组下显示"暂无模板"的提示信息
8. WHEN 用户在操作面板中查看分组 THEN 快捷回复系统 SHALL 显示分组名称，并在分组名称前显示可展开/折叠的箭头图标（▼展开，▶折叠）
9. WHEN 分组处于折叠状态 THEN 快捷回复系统 SHALL 隐藏该分组下的所有模板，箭头图标显示为▶
10. WHEN 分组处于展开状态 THEN 快捷回复系统 SHALL 显示该分组下的所有模板，每个模板占据一行，箭头图标显示为▼
11. WHEN 分组名称显示 THEN 快捷回复系统 SHALL 使用灰色文字显示分组名称

### 需求 3：回复模板内容创建

**用户故事**：作为客服人员，我希望能够创建包含多种媒体类型的回复模板，并为每个模板添加自定义标签，以便应对不同的客户沟通场景。

#### 验收标准

1. WHEN 用户在分组下点击"添加模板"按钮 THEN 快捷回复系统 SHALL 显示模板类型选择菜单，包含文本、图片、音频、视频、图文、名片选项
2. WHEN 用户选择"文本"类型 THEN 快捷回复系统 SHALL 显示文本编辑界面，包含模板标签输入框和文本内容输入框
3. WHEN 用户选择"图片"类型 THEN 快捷回复系统 SHALL 显示图片上传界面，包含模板标签输入框和图片上传区域
4. WHEN 用户选择"音频"类型 THEN 快捷回复系统 SHALL 显示音频上传界面，包含模板标签输入框和音频上传区域
5. WHEN 用户选择"视频"类型 THEN 快捷回复系统 SHALL 显示视频上传界面，包含模板标签输入框和视频上传区域
6. WHEN 用户选择"图文"类型 THEN 快捷回复系统 SHALL 显示图文混合编辑界面，包含模板标签输入框、图片上传区域和文本输入框
7. WHEN 用户选择"名片"类型 THEN 快捷回复系统 SHALL 显示名片信息输入界面，包含模板标签输入框和联系人信息输入字段
8. WHEN 用户输入模板标签 THEN 快捷回复系统 SHALL 允许用户输入最多 50 个字符的自定义标签文本
9. WHEN 用户未输入模板标签 THEN 快捷回复系统 SHALL 使用默认标签（如"新模板"、"图片模板"等）
10. WHEN 用户完成内容编辑并点击保存 THEN 快捷回复系统 SHALL 验证模板标签和内容是否有效
11. WHEN 模板标签和内容有效 THEN 快捷回复系统 SHALL 将该模板保存到当前分组中
12. WHEN 用户上传的媒体文件超过 WhatsApp 限制大小 THEN 快捷回复系统 SHALL 显示错误提示，阻止保存
13. WHEN 模板保存成功 THEN 快捷回复系统 SHALL 在模板列表中显示该模板，模板标签作为模板的标识名称

### 需求 4：回复模板展示与预览

**用户故事**：作为客服人员，我希望能够清晰地查看和预览回复模板的内容，以便快速选择合适的回复。

#### 验收标准

1. WHEN 快捷回复面板显示模板列表 THEN 快捷回复系统 SHALL 为每个模板显示序号、内容预览、"发送"按钮和"输入框提示"按钮
2. WHEN 模板类型为文本 THEN 快捷回复系统 SHALL 显示文本内容的前两行，超出部分不显示
3. WHEN 模板类型为图片 THEN 快捷回复系统 SHALL 显示图片缩略图，图标标识为"图"，并显示"图片模板"标签
4. WHEN 模板类型为音频 THEN 快捷回复系统 SHALL 显示音频播放器控件（播放按钮、进度条、音量控制、更多选项）和音频时长（格式为 mm:ss）
5. WHEN 模板类型为视频 THEN 快捷回复系统 SHALL 显示视频缩略图、播放器控件（播放按钮、进度条）和视频时长（格式为 mm:ss）
6. WHEN 模板类型为图文 THEN 快捷回复系统 SHALL 同时显示图片缩略图和文本内容预览
7. WHEN 模板类型为名片 THEN 快捷回复系统 SHALL 显示联系人姓名和"名片模板"标签
8. WHEN 用户点击模板内容区域 THEN 快捷回复系统 SHALL 显示完整内容的预览弹窗
9. WHEN 用户在预览弹窗中点击关闭按钮 THEN 快捷回复系统 SHALL 关闭预览弹窗
10. WHEN 模板列表中显示图片模板 THEN 快捷回复系统 SHALL 在图片左上角显示"图"字图标标识
11. WHEN 模板列表中显示视频模板 THEN 快捷回复系统 SHALL 在视频缩略图中央显示播放按钮图标
12. WHEN 模板序号显示 THEN 快捷回复系统 SHALL 在模板左侧显示序号，序号为该分组内的相对序号

### 需求 5：回复模板编辑与删除

**用户故事**：作为客服人员，我希望能够修改和删除已创建的回复模板，以便保持模板库的准确性和时效性。

#### 验收标准

1. WHEN 用户在管理界面点击模板旁的编辑图标 THEN 快捷回复系统 SHALL 打开模板编辑界面，显示当前模板的所有内容
2. WHEN 用户修改模板内容并点击保存 THEN 快捷回复系统 SHALL 更新该模板的内容
3. WHEN 用户点击模板旁的删除图标 THEN 快捷回复系统 SHALL 显示确认对话框，询问是否删除该模板
4. WHEN 用户确认删除模板 THEN 快捷回复系统 SHALL 从分组中移除该模板
5. WHEN 用户在编辑界面点击取消按钮 THEN 快捷回复系统 SHALL 放弃所有修改并关闭编辑界面

### 需求 6：关键词搜索功能

**用户故事**：作为客服人员，我希望能够通过关键词快速搜索回复模板，以便在大量模板中快速找到需要的内容。

#### 验收标准

1. WHEN 用户在搜索框中输入关键词 THEN 快捷回复系统 SHALL 实时过滤模板列表，仅显示内容包含该关键词的模板
2. WHEN 搜索关键词匹配模板的文本内容 THEN 快捷回复系统 SHALL 在搜索结果中显示该模板
3. WHEN 搜索关键词匹配分组名称 THEN 快捷回复系统 SHALL 在搜索结果中显示该分组下的所有模板
4. WHEN 搜索关键词不匹配任何模板或分组 THEN 快捷回复系统 SHALL 显示"未找到匹配的快捷回复"提示信息
5. WHEN 用户清空搜索框 THEN 快捷回复系统 SHALL 恢复显示所有分组和模板
6. WHEN 用户在搜索结果中点击模板 THEN 快捷回复系统 SHALL 执行正常的发送或插入操作

### 需求 7：原文发送模式

**用户故事**：作为客服人员，我希望能够直接发送回复模板的原始内容，以便快速响应客户。

#### 验收标准

1. WHEN 用户选择"原文发送"模式并点击模板的"发送"按钮 THEN 快捷回复系统 SHALL 将模板的原始内容直接发送到当前聊天窗口
2. WHEN 发送的模板类型为文本 THEN 快捷回复系统 SHALL 将文本内容作为消息发送
3. WHEN 发送的模板类型为图片 THEN 快捷回复系统 SHALL 将图片文件作为消息发送
4. WHEN 发送的模板类型为音频 THEN 快捷回复系统 SHALL 将音频文件作为消息发送
5. WHEN 发送的模板类型为视频 THEN 快捷回复系统 SHALL 将视频文件作为消息发送
6. WHEN 发送的模板类型为图文 THEN 快捷回复系统 SHALL 先发送图片，再发送文本内容
7. WHEN 发送的模板类型为名片 THEN 快捷回复系统 SHALL 将名片信息作为联系人卡片发送
8. WHEN 消息发送成功 THEN 快捷回复系统 SHALL 在聊天窗口中显示已发送的消息
9. WHEN 消息发送失败 THEN 快捷回复系统 SHALL 显示错误提示，并保留消息内容供用户重试

### 需求 8：翻译后发送模式

**用户故事**：作为客服人员，我希望能够将回复模板翻译后再发送，以便与不同语言的客户沟通。

#### 验收标准

1. WHEN 用户选择"翻译后发送"模式并点击模板的"发送"按钮 THEN 快捷回复系统 SHALL 调用翻译引擎翻译模板内容后再发送
2. WHEN 模板类型为文本 THEN 快捷回复系统 SHALL 翻译文本内容后发送
3. WHEN 模板类型为图文 THEN 快捷回复系统 SHALL 翻译文本部分后，与图片一起发送
4. WHEN 模板类型为图片、音频、视频、名片 THEN 快捷回复系统 SHALL 直接发送原始内容，不进行翻译
5. WHEN 翻译引擎未配置或不可用 THEN 快捷回复系统 SHALL 显示错误提示，询问用户是否以原文发送
6. WHEN 翻译过程中发生错误 THEN 快捷回复系统 SHALL 显示错误提示，并提供重试或原文发送选项
7. WHEN 翻译成功 THEN 快捷回复系统 SHALL 将翻译后的内容发送到聊天窗口
8. WHEN 用户在翻译设置中配置了输入框翻译引擎 THEN 快捷回复系统 SHALL 使用该翻译引擎进行翻译
9. WHEN 用户在翻译设置中配置了翻译风格 THEN 快捷回复系统 SHALL 应用该风格进行翻译

### 需求 9：输入框快速插入

**用户故事**：作为客服人员，我希望能够将回复模板插入到输入框中而不是直接发送，以便在发送前进行修改或添加个性化内容。

#### 验收标准

1. WHEN 用户点击模板旁的"输入框提示"按钮 THEN 快捷回复系统 SHALL 将模板内容插入到当前聊天窗口的输入框中
2. WHEN 插入的模板类型为文本 THEN 快捷回复系统 SHALL 将文本内容插入到输入框光标位置
3. WHEN 输入框已有内容 THEN 快捷回复系统 SHALL 在现有内容后追加模板内容
4. WHEN 插入的模板类型为图片、音频、视频 THEN 快捷回复系统 SHALL 将媒体文件附加到输入框的附件区域
5. WHEN 插入的模板类型为图文 THEN 快捷回复系统 SHALL 将文本插入输入框，图片附加到附件区域
6. WHEN 插入的模板类型为名片 THEN 快捷回复系统 SHALL 将名片信息附加到输入框的附件区域
7. WHEN 插入操作完成 THEN 快捷回复系统 SHALL 将输入框焦点设置到内容末尾，方便用户继续编辑
8. WHEN 用户在"翻译后发送"模式下点击"输入框提示"按钮 THEN 快捷回复系统 SHALL 先翻译内容再插入到输入框

### 需求 10：模板导入导出

**用户故事**：作为客服人员，我希望能够导入和导出快捷回复模板，以便备份数据或在不同设备间共享模板。

#### 验收标准

1. WHEN 用户在管理界面点击"导出"按钮 THEN 快捷回复系统 SHALL 将所有分组和模板导出为 JSON 格式文件
2. WHEN 导出文件生成成功 THEN 快捷回复系统 SHALL 提示用户选择保存位置并保存文件
3. WHEN 用户在管理界面点击"导入"按钮 THEN 快捷回复系统 SHALL 显示文件选择对话框，允许用户选择 JSON 格式的模板文件
4. WHEN 用户选择有效的模板文件 THEN 快捷回复系统 SHALL 解析文件内容并导入所有分组和模板
5. WHEN 导入的分组名称与现有分组重复 THEN 快捷回复系统 SHALL 在分组名称后添加数字后缀以避免冲突
6. WHEN 导入的模板文件格式无效 THEN 快捷回复系统 SHALL 显示错误提示，说明文件格式不正确
7. WHEN 导入操作成功 THEN 快捷回复系统 SHALL 显示成功提示，并刷新模板列表
8. WHEN 导出的文件包含媒体文件 THEN 快捷回复系统 SHALL 将媒体文件以 Base64 编码或相对路径的形式包含在 JSON 文件中

### 需求 11：账号级配置隔离

**用户故事**：作为使用多个 WhatsApp 账号的客服人员，我希望每个账号拥有独立的快捷回复配置，以便为不同账号定制不同的回复模板。

#### 验收标准

1. WHEN 用户切换到不同的 WhatsApp 账号 THEN 快捷回复系统 SHALL 加载该账号对应的快捷回复配置和模板库
2. WHEN 用户在某个账号下创建或修改模板 THEN 快捷回复系统 SHALL 仅影响当前账号的模板库，不影响其他账号
3. WHEN 用户在某个账号下删除模板或分组 THEN 快捷回复系统 SHALL 仅从当前账号的模板库中删除，不影响其他账号
4. WHEN 用户在某个账号下导入模板 THEN 快捷回复系统 SHALL 仅导入到当前账号的模板库
5. WHEN 用户在某个账号下导出模板 THEN 快捷回复系统 SHALL 仅导出当前账号的模板库
6. WHEN 用户首次使用某个账号的快捷回复功能 THEN 快捷回复系统 SHALL 为该账号创建空的模板库
7. WHEN 系统存储快捷回复数据 THEN 快捷回复系统 SHALL 使用账号唯一标识符作为数据存储的命名空间

### 需求 12：管理界面访问与布局

**用户故事**：作为客服人员，我希望能够访问专门的管理界面来预先设置和批量管理快捷回复模板，以便更高效地组织和维护大量模板。

#### 验收标准

1. WHEN 用户在快捷回复操作面板点击"编辑管理"图标 THEN 快捷回复系统 SHALL 打开独立的管理界面窗口
2. WHEN 管理界面打开 THEN 快捷回复系统 SHALL 在窗口顶部显示标题"快捷回复"和提示文字"预先设置一些常用的回复内容，帮助您更高效地回复消息"
3. WHEN 管理界面打开 THEN 快捷回复系统 SHALL 在顶部右侧显示"下载模板"和"导入/添加"按钮
4. WHEN 管理界面打开 THEN 快捷回复系统 SHALL 在左侧显示平台选择区域，包含 WhatsApp 图标和平台名称
5. WHEN 管理界面打开 THEN 快捷回复系统 SHALL 在中间区域显示分组管理面板，顶部包含"分组"标题、搜索框和操作提示
6. WHEN 管理界面打开 THEN 快捷回复系统 SHALL 在分组管理面板中显示分组列表，每个分组显示复选框、分组名称、"+"图标和"..."图标
7. WHEN 管理界面打开 THEN 快捷回复系统 SHALL 在右侧显示内容编辑区域，包含多个标签页（活跃文本、活跃图文、活跃图片、活跃视频、活跃名片等）
8. WHEN 管理界面打开 THEN 快捷回复系统 SHALL 在内容编辑区域顶部显示内容类型筛选标签
9. WHEN 用户在管理界面选择某个分组 THEN 快捷回复系统 SHALL 在右侧显示该分组下的所有模板，按类型分标签页展示
10. WHEN 用户在管理界面进行任何修改 THEN 快捷回复系统 SHALL 实时同步到快捷回复操作面板
11. WHEN 用户关闭管理界面 THEN 快捷回复系统 SHALL 保存所有修改并返回主界面
12. WHEN 管理界面显示分组列表 THEN 快捷回复系统 SHALL 在每个分组旁显示"+"和"..."操作图标
13. WHEN 用户点击分组旁的"+"图标 THEN 快捷回复系统 SHALL 显示添加选项菜单，包含"新建子分组"和"添加模板"选项
14. WHEN 用户点击分组旁的"..."图标 THEN 快捷回复系统 SHALL 显示更多操作菜单（编辑、删除、重命名等）

### 需求 13：批量操作支持

**用户故事**：作为客服人员，我希望能够批量选择和操作多个回复模板，以便快速整理和管理模板库。

#### 验收标准

1. WHEN 用户在管理界面启用批量选择模式 THEN 快捷回复系统 SHALL 在每个模板前显示复选框
2. WHEN 用户勾选多个模板 THEN 快捷回复系统 SHALL 在顶部显示批量操作工具栏，包含"移动到分组"、"删除"按钮
3. WHEN 用户点击"移动到分组"按钮 THEN 快捷回复系统 SHALL 显示分组选择菜单，允许用户选择目标分组
4. WHEN 用户选择目标分组并确认 THEN 快捷回复系统 SHALL 将所有选中的模板移动到目标分组
5. WHEN 用户点击"删除"按钮 THEN 快捷回复系统 SHALL 显示确认对话框，询问是否删除所有选中的模板
6. WHEN 用户确认批量删除 THEN 快捷回复系统 SHALL 删除所有选中的模板
7. WHEN 用户点击"全选"按钮 THEN 快捷回复系统 SHALL 选中当前分组下的所有模板
8. WHEN 用户点击"取消选择"按钮 THEN 快捷回复系统 SHALL 取消所有模板的选中状态
9. WHEN 管理界面显示模板列表 THEN 快捷回复系统 SHALL 在每个模板行显示复选框、模板类型图标、模板标题、编辑图标和删除图标
10. WHEN 用户在管理界面勾选某个分组 THEN 快捷回复系统 SHALL 自动选中该分组下的所有模板

### 需求 14：发送状态反馈

**用户故事**：作为客服人员，我希望能够清楚地看到快捷回复的发送状态，以便确认消息是否成功发送。

#### 验收标准

1. WHEN 用户点击"发送"按钮 THEN 快捷回复系统 SHALL 在按钮上显示加载动画，表示正在发送
2. WHEN 消息发送成功 THEN 快捷回复系统 SHALL 显示成功提示（如绿色对勾图标），持续 2 秒后消失
3. WHEN 消息发送失败 THEN 快捷回复系统 SHALL 显示错误提示（如红色叉号图标），并显示失败原因
4. WHEN 翻译过程中 THEN 快捷回复系统 SHALL 显示"正在翻译..."的提示信息
5. WHEN 翻译完成 THEN 快捷回复系统 SHALL 显示"翻译完成，正在发送..."的提示信息
6. WHEN 用户在发送过程中点击取消按钮 THEN 快捷回复系统 SHALL 中止发送操作并显示"已取消"提示
7. WHEN 网络连接中断 THEN 快捷回复系统 SHALL 显示"网络连接失败"错误提示

### 需求 15：模板使用统计

**用户故事**：作为客服主管，我希望能够查看快捷回复模板的使用统计，以便了解哪些模板最常用，优化模板库。

#### 验收标准

1. WHEN 用户使用某个模板发送消息 THEN 快捷回复系统 SHALL 记录该模板的使用次数
2. WHEN 用户在管理界面查看模板详情 THEN 快捷回复系统 SHALL 显示该模板的使用次数和最后使用时间
3. WHEN 用户在管理界面点击"统计"按钮 THEN 快捷回复系统 SHALL 显示所有模板的使用统计报告
4. WHEN 统计报告显示 THEN 快捷回复系统 SHALL 按使用次数降序排列模板
5. WHEN 统计报告显示 THEN 快捷回复系统 SHALL 显示每个模板的使用次数、使用率（占总发送次数的百分比）
6. WHEN 用户在统计报告中点击某个模板 THEN 快捷回复系统 SHALL 跳转到该模板的详情页面
7. WHEN 用户删除某个模板 THEN 快捷回复系统 SHALL 同时删除该模板的使用统计数据

### 需求 16：多媒体内容播放控制

**用户故事**：作为客服人员，我希望能够在快捷回复面板中直接预览和播放音频、视频内容，以便确认内容后再发送。

#### 验收标准

1. WHEN 模板类型为音频 THEN 快捷回复系统 SHALL 显示标准音频播放器，包含播放/暂停按钮、进度条、时间显示（当前时间/总时长）、音量控制和更多选项按钮
2. WHEN 用户点击音频播放按钮 THEN 快捷回复系统 SHALL 开始播放音频，播放按钮变为暂停按钮
3. WHEN 用户点击音频暂停按钮 THEN 快捷回复系统 SHALL 暂停播放，暂停按钮变为播放按钮
4. WHEN 用户拖动音频进度条 THEN 快捷回复系统 SHALL 跳转到对应的播放位置
5. WHEN 用户点击音量控制按钮 THEN 快捷回复系统 SHALL 显示音量滑块，允许用户调节音量
6. WHEN 用户点击更多选项按钮 THEN 快捷回复系统 SHALL 显示额外选项菜单（如播放速度、循环播放等）
7. WHEN 模板类型为视频 THEN 快捷回复系统 SHALL 显示视频播放器，包含视频缩略图、播放按钮、进度条和时间显示
8. WHEN 用户点击视频播放按钮 THEN 快捷回复系统 SHALL 在原位置或弹窗中播放视频
9. WHEN 视频播放完毕 THEN 快捷回复系统 SHALL 自动停止播放，显示重播按钮
10. WHEN 用户在播放音频或视频时切换到其他模板 THEN 快捷回复系统 SHALL 自动停止当前播放

### 需求 17：模板内容标签分类

**用户故事**：作为客服人员，我希望能够在管理界面中按内容类型查看模板，以便快速找到特定类型的回复内容。

#### 验收标准

1. WHEN 管理界面右侧内容区域显示 THEN 快捷回复系统 SHALL 显示多个标签页，包括"活跃文本"、"活跃图文"、"活跃图片"、"活跃视频"、"活跃名片"等
2. WHEN 用户点击"活跃文本"标签页 THEN 快捷回复系统 SHALL 仅显示当前分组下的文本类型模板
3. WHEN 用户点击"活跃图文"标签页 THEN 快捷回复系统 SHALL 仅显示当前分组下的图文混合类型模板
4. WHEN 用户点击"活跃图片"标签页 THEN 快捷回复系统 SHALL 仅显示当前分组下的图片类型模板
5. WHEN 用户点击"活跃视频"标签页 THEN 快捷回复系统 SHALL 仅显示当前分组下的视频类型模板
6. WHEN 用户点击"活跃名片"标签页 THEN 快捷回复系统 SHALL 仅显示当前分组下的名片类型模板
7. WHEN 某个标签页下没有对应类型的模板 THEN 快捷回复系统 SHALL 显示"暂无该类型模板"的提示信息
8. WHEN 用户在某个标签页下添加新模板 THEN 快捷回复系统 SHALL 自动将模板类型设置为该标签页对应的类型

### 需求 18：常用问题模板快速访问

**用户故事**：作为客服人员，我希望能够快速访问常用问题的回复模板，以便提高回复效率。

#### 验收标准

1. WHEN 快捷回复面板显示分组列表 THEN 快捷回复系统 SHALL 支持创建"常用问题模板"分组
2. WHEN 用户展开"常用问题模板"分组 THEN 快捷回复系统 SHALL 显示该分组下的所有常用问题回复
3. WHEN 常用问题模板显示 THEN 快捷回复系统 SHALL 显示问题标题（如"可以的"、"没问题"等）和序号
4. WHEN 用户点击常用问题模板的"发送"按钮 THEN 快捷回复系统 SHALL 将该问题的回复内容发送到聊天窗口
5. WHEN 用户点击常用问题模板的"输入框提示"按钮 THEN 快捷回复系统 SHALL 将该问题的回复内容插入到输入框

### 需求 19：分组层级结构支持

**用户故事**：作为客服人员，我希望能够创建多层级的分组结构，以便更细致地组织回复模板。

#### 验收标准

1. WHEN 用户在某个分组下点击"新建子分组"按钮 THEN 快捷回复系统 SHALL 在该分组下创建一个子分组
2. WHEN 子分组创建成功 THEN 快捷回复系统 SHALL 在父分组下以缩进形式显示子分组
3. WHEN 用户展开父分组 THEN 快捷回复系统 SHALL 显示该分组下的所有子分组和模板
4. WHEN 用户折叠父分组 THEN 快捷回复系统 SHALL 隐藏该分组下的所有子分组和模板
5. WHEN 用户删除父分组 THEN 快捷回复系统 SHALL 同时删除该分组下的所有子分组和模板
6. WHEN 用户将模板拖动到子分组 THEN 快捷回复系统 SHALL 将该模板移动到目标子分组
7. WHEN 分组层级超过 3 层 THEN 快捷回复系统 SHALL 显示警告提示，建议简化分组结构

### 需求 20：快捷回复面板工具栏功能

**用户故事**：作为客服人员，我希望能够使用快捷回复面板顶部的工具栏快速执行常用操作。

#### 验收标准

1. WHEN 快捷回复面板打开 THEN 快捷回复系统 SHALL 在顶部显示工具栏，包含刷新、编辑管理、复制和设置菜单图标
2. WHEN 用户点击刷新图标 THEN 快捷回复系统 SHALL 重新加载当前账号的快捷回复配置和模板库
3. WHEN 用户点击编辑管理图标 THEN 快捷回复系统 SHALL 打开管理界面窗口
4. WHEN 用户点击复制图标 THEN 快捷回复系统 SHALL 显示复制选项菜单（如复制当前分组、复制所有模板等）
5. WHEN 用户点击设置菜单图标 THEN 快捷回复系统 SHALL 显示设置菜单，包含导入、导出、清空缓存等选项
6. WHEN 用户在设置菜单中选择"导入" THEN 快捷回复系统 SHALL 打开文件选择对话框，允许用户导入模板文件
7. WHEN 用户在设置菜单中选择"导出" THEN 快捷回复系统 SHALL 将当前账号的所有模板导出为文件
8. WHEN 用户在设置菜单中选择"清空缓存" THEN 快捷回复系统 SHALL 清除所有缓存数据并重新加载模板库

### 需求 21：模板拖拽排序

**用户故事**：作为客服人员，我希望能够通过拖拽方式调整模板的显示顺序，以便将常用模板放在前面。

#### 验收标准

1. WHEN 用户在管理界面按住某个模板 THEN 快捷回复系统 SHALL 允许用户拖动该模板
2. WHEN 用户拖动模板到新位置并释放 THEN 快捷回复系统 SHALL 将该模板移动到新位置
3. WHEN 用户拖动模板到其他分组 THEN 快捷回复系统 SHALL 将该模板移动到目标分组
4. WHEN 模板顺序发生变化 THEN 快捷回复系统 SHALL 自动更新模板序号
5. WHEN 用户拖动模板时 THEN 快捷回复系统 SHALL 显示拖动预览效果，包括半透明的模板卡片
6. WHEN 用户拖动模板到无效位置 THEN 快捷回复系统 SHALL 显示禁止图标，释放后模板返回原位置

### 需求 22：模板内容编辑器

**用户故事**：作为客服人员，我希望能够使用功能丰富的编辑器创建和编辑模板内容，以便制作更专业的回复。

#### 验收标准

1. WHEN 用户创建或编辑文本模板 THEN 快捷回复系统 SHALL 显示富文本编辑器，支持文本格式化（加粗、斜体、下划线等）
2. WHEN 用户创建或编辑图文模板 THEN 快捷回复系统 SHALL 显示图文混合编辑器，允许用户同时编辑图片和文本
3. WHEN 用户在编辑器中插入图片 THEN 快捷回复系统 SHALL 显示图片预览，并允许用户调整图片大小和位置
4. WHEN 用户在编辑器中插入链接 THEN 快捷回复系统 SHALL 显示链接输入对话框，允许用户输入链接地址和显示文本
5. WHEN 用户在编辑器中插入表情符号 THEN 快捷回复系统 SHALL 显示表情符号选择器
6. WHEN 用户保存模板内容 THEN 快捷回复系统 SHALL 验证内容格式，确保符合 WhatsApp 消息格式要求
7. WHEN 模板内容超过 WhatsApp 消息长度限制 THEN 快捷回复系统 SHALL 显示警告提示，建议用户缩短内容

### 需求 23：管理界面分组操作

**用户故事**：作为客服人员，我希望能够在管理界面中方便地管理分组，以便组织大量的快捷回复模板。

#### 验收标准

1. WHEN 管理界面显示分组列表 THEN 快捷回复系统 SHALL 在分组管理面板顶部显示"分组"标题和提示文字"可拖动排序，可批量选择后支持"
2. WHEN 管理界面显示分组列表 THEN 快捷回复系统 SHALL 在每个分组前显示复选框，用于批量选择
3. WHEN 用户勾选某个分组的复选框 THEN 快捷回复系统 SHALL 选中该分组，复选框显示为选中状态
4. WHEN 用户勾选多个分组 THEN 快捷回复系统 SHALL 在顶部显示批量操作按钮（如删除、移动等）
5. WHEN 用户点击分组名称 THEN 快捷回复系统 SHALL 选中该分组，并在右侧内容区域显示该分组下的所有模板
6. WHEN 用户点击分组旁的"+"图标 THEN 快捷回复系统 SHALL 显示添加菜单，包含"新建子分组"和"添加模板"选项
7. WHEN 用户点击分组旁的"..."图标 THEN 快捷回复系统 SHALL 显示操作菜单，包含"重命名"、"删除"、"复制"等选项
8. WHEN 用户拖动分组 THEN 快捷回复系统 SHALL 允许用户调整分组的显示顺序
9. WHEN 用户在搜索框中输入关键词 THEN 快捷回复系统 SHALL 过滤分组列表，仅显示名称包含关键词的分组

### 需求 24：管理界面模板列表展示

**用户故事**：作为客服人员，我希望能够在管理界面中清晰地查看和管理模板列表，以便快速找到和编辑特定模板。

#### 验收标准

1. WHEN 用户在管理界面选择某个分组 THEN 快捷回复系统 SHALL 在右侧内容区域显示该分组下的所有模板
2. WHEN 模板列表显示 THEN 快捷回复系统 SHALL 在每个模板行显示复选框、模板类型标识、模板标签、编辑图标和删除图标
3. WHEN 模板类型为文本 THEN 快捷回复系统 SHALL 在模板类型标识位置显示灰色背景的"模板"文字标签
4. WHEN 模板类型为图片 THEN 快捷回复系统 SHALL 在模板类型标识位置显示灰色背景的"模板"文字标签
5. WHEN 模板类型为视频 THEN 快捷回复系统 SHALL 在模板类型标识位置显示灰色背景的"模板"文字标签
6. WHEN 模板类型为图文 THEN 快捷回复系统 SHALL 在模板类型标识位置显示灰色背景的"图片模板"文字标签
7. WHEN 模板类型为名片 THEN 快捷回复系统 SHALL 在模板类型标识位置显示灰色背景的"图片模板"文字标签
8. WHEN 模板标签显示 THEN 快捷回复系统 SHALL 在模板类型标识右侧显示用户自定义的模板标签文字（如"新模板"、"视频模板"、"图片模板"、"常用问题模板"等）
9. WHEN 用户点击模板行的编辑图标（铅笔图标）THEN 快捷回复系统 SHALL 打开模板编辑对话框，允许用户修改模板标签和内容
10. WHEN 用户点击模板行的删除图标（垃圾桶图标）THEN 快捷回复系统 SHALL 显示确认对话框，询问是否删除该模板
11. WHEN 用户勾选模板的复选框 THEN 快捷回复系统 SHALL 选中该模板，用于批量操作
12. WHEN 模板行显示 THEN 快捷回复系统 SHALL 在模板行右侧显示编辑图标和删除图标，鼠标悬停时显示

### 需求 25：管理界面内容类型标签页

**用户故事**：作为客服人员，我希望能够在管理界面中按内容类型查看模板，以便快速找到特定类型的模板。

#### 验收标准

1. WHEN 管理界面右侧内容区域显示 THEN 快捷回复系统 SHALL 在顶部显示内容类型标签页，包括"活跃文本"、"活跃图文"、"活跃图片"、"活跃视频"、"活跃名片"等
2. WHEN 用户点击"活跃文本"标签页 THEN 快捷回复系统 SHALL 仅显示当前分组下的文本类型模板
3. WHEN 用户点击"活跃图文"标签页 THEN 快捷回复系统 SHALL 仅显示当前分组下的图文混合类型模板
4. WHEN 用户点击"活跃图片"标签页 THEN 快捷回复系统 SHALL 仅显示当前分组下的图片类型模板
5. WHEN 用户点击"活跃视频"标签页 THEN 快捷回复系统 SHALL 仅显示当前分组下的视频类型模板
6. WHEN 用户点击"活跃名片"标签页 THEN 快捷回复系统 SHALL 仅显示当前分组下的名片类型模板
7. WHEN 某个标签页下没有对应类型的模板 THEN 快捷回复系统 SHALL 显示空状态提示
8. WHEN 用户切换标签页 THEN 快捷回复系统 SHALL 保持当前选中的分组不变

### 需求 26：操作面板模板序号显示

**用户故事**：作为客服人员，我希望能够在操作面板中看到模板的序号，以便快速定位和选择模板。

#### 验收标准

1. WHEN 操作面板显示模板列表 THEN 快捷回复系统 SHALL 在每个模板左侧显示序号
2. WHEN 模板属于某个分组 THEN 快捷回复系统 SHALL 显示该模板在分组内的相对序号（从 1 开始）
3. WHEN 分组下有多个模板 THEN 快捷回复系统 SHALL 按照模板的创建顺序或用户自定义顺序显示序号
4. WHEN 用户调整模板顺序 THEN 快捷回复系统 SHALL 自动更新模板序号
5. WHEN 用户删除某个模板 THEN 快捷回复系统 SHALL 自动调整后续模板的序号

### 需求 27：操作面板模板内容预览

**用户故事**：作为客服人员，我希望能够在操作面板中预览模板的内容，以便确认选择正确的模板。

#### 验收标准

1. WHEN 操作面板显示文本模板 THEN 快捷回复系统 SHALL 显示文本内容的前两行，超出部分不显示
2. WHEN 操作面板显示图片模板 THEN 快捷回复系统 SHALL 显示图片缩略图，图片左上角显示"图"字图标
3. WHEN 操作面板显示视频模板 THEN 快捷回复系统 SHALL 显示视频缩略图和播放控件，包括播放按钮、进度条和时长显示
4. WHEN 操作面板显示音频模板 THEN 快捷回复系统 SHALL 显示音频播放控件，包括播放按钮、进度条、时长显示、音量控制和更多选项按钮
5. WHEN 操作面板显示图文模板 THEN 快捷回复系统 SHALL 同时显示图片缩略图和文本内容预览
6. WHEN 操作面板显示名片模板 THEN 快捷回复系统 SHALL 显示联系人姓名和"名片模板"标识

### 需求 28：操作面板发送和插入按钮

**用户故事**：作为客服人员，我希望能够在操作面板中快速发送或插入模板内容，以便高效回复客户。

#### 验收标准

1. WHEN 操作面板显示模板 THEN 快捷回复系统 SHALL 在每个模板右侧显示"发送"按钮和"输入框提示"按钮
2. WHEN 用户点击"发送"按钮 THEN 快捷回复系统 SHALL 根据当前选择的发送模式（原文发送或翻译后发送）发送模板内容
3. WHEN 用户点击"输入框提示"按钮 THEN 快捷回复系统 SHALL 将模板内容插入到聊天输入框中
4. WHEN 发送模式为"原文发送" THEN 快捷回复系统 SHALL 直接发送模板的原始内容
5. WHEN 发送模式为"翻译后发送" THEN 快捷回复系统 SHALL 先翻译模板内容，再发送翻译后的内容
6. WHEN 用户点击"输入框提示"按钮且发送模式为"翻译后发送" THEN 快捷回复系统 SHALL 先翻译模板内容，再插入到输入框
7. WHEN "发送"按钮显示 THEN 快捷回复系统 SHALL 使用蓝色背景和白色文字，按钮文字为"发送"
8. WHEN "输入框提示"按钮显示 THEN 快捷回复系统 SHALL 使用灰色背景和深色文字，按钮文字为"输入框提示"

### 需求 29：模板默认命名规则

**用户故事**：作为客服人员，我希望系统能够为新创建的模板提供默认名称，以便快速创建模板而无需每次都输入名称。

#### 验收标准

1. WHEN 用户创建新的文本模板且未输入模板标签 THEN 快捷回复系统 SHALL 使用"新模板"作为默认标签
2. WHEN 用户创建新的图片模板且未输入模板标签 THEN 快捷回复系统 SHALL 使用"图片模板"作为默认标签
3. WHEN 用户创建新的视频模板且未输入模板标签 THEN 快捷回复系统 SHALL 使用"视频模板"作为默认标签
4. WHEN 用户创建新的音频模板且未输入模板标签 THEN 快捷回复系统 SHALL 使用"音频模板"作为默认标签
5. WHEN 用户创建新的图文模板且未输入模板标签 THEN 快捷回复系统 SHALL 使用"图文模板"作为默认标签
6. WHEN 用户创建新的名片模板且未输入模板标签 THEN 快捷回复系统 SHALL 使用"名片模板"作为默认标签
7. WHEN 同一分组下已存在相同名称的模板 THEN 快捷回复系统 SHALL 在默认名称后添加数字后缀（如"新模板2"、"新模板3"）
8. WHEN 用户输入自定义模板标签 THEN 快捷回复系统 SHALL 使用用户输入的标签替代默认标签

### 需求 30：管理界面顶部提示信息

**用户故事**：作为客服人员，我希望能够在管理界面看到功能提示信息，以便更好地理解和使用快捷回复功能。

#### 验收标准

1. WHEN 管理界面打开 THEN 快捷回复系统 SHALL 在窗口顶部显示标题"快捷回复"
2. WHEN 管理界面打开 THEN 快捷回复系统 SHALL 在标题下方显示提示文字"预先设置一些常用的回复内容，帮助您更高效地回复消息"
3. WHEN 提示文字显示 THEN 快捷回复系统 SHALL 使用灰色字体，字号小于标题
4. WHEN 管理界面分组管理面板显示 THEN 快捷回复系统 SHALL 在分组列表上方显示提示文字"可拖动排序，可批量选择后支持"
5. WHEN 分组提示文字显示 THEN 快捷回复系统 SHALL 使用灰色字体，字号较小
