# 快捷回复功能使用指南

## 功能位置

快捷回复功能已集成到应用的右侧面板中，与翻译设置和环境设置并列。

## 使用步骤

### 1. 启动应用并打开账号

1. 启动 WhatsApp 桌面应用
2. 从左侧边栏选择并打开一个 WhatsApp 账号
3. 等待账号加载完成

### 2. 打开快捷回复面板

在应用右侧，你会看到一个垂直的菜单栏，包含三个按钮：

- **翻译设置** （语言图标）
- **环境设置** （盾牌图标）
- **快捷回复** （💬 消息气泡图标）← 点击这个

点击"快捷回复"按钮后，右侧面板会切换到快捷回复界面。

### 3. 首次使用

首次使用时，快捷回复面板会显示：
- 空的模板列表
- "添加模板"按钮
- 搜索框
- 发送模式选择器（原文/翻译后发送）

### 4. 创建第一个模板

1. 点击"添加模板"按钮
2. 在弹出的对话框中：
   - 输入模板标签（例如："问候"）
   - 输入模板内容（例如："你好，很高兴认识你！"）
   - 选择模板类型（文本/图片/音频/视频/图文/名片）
3. 点击"保存"

### 5. 使用模板

1. 在 WhatsApp 聊天界面选择一个联系人
2. 在快捷回复面板中找到你的模板
3. 点击模板旁边的：
   - **发送按钮**：直接发送模板内容
   - **插入按钮**：将模板内容插入到输入框

## 功能特性

### 基础功能
- ✅ 创建、编辑、删除模板
- ✅ 模板分组管理
- ✅ 搜索模板
- ✅ 一键发送或插入

### 高级功能
- ✅ 支持多种媒体类型（文本、图片、音频、视频、图文、名片）
- ✅ 翻译后发送（与翻译系统集成）
- ✅ 账号级数据隔离（每个账号独立的模板库）
- ✅ 使用统计（记录模板使用次数和时间）
- ✅ 导入/导出模板

### 管理界面
点击快捷回复面板顶部的"管理"按钮，可以打开完整的管理界面：
- 批量操作（批量删除、移动）
- 拖拽排序
- 分组管理
- 使用统计报告

## 故障排除

### 问题 1：看不到快捷回复按钮

**解决方案**：
- 确保应用已更新到最新版本
- 检查右侧面板是否展开
- 尝试重启应用

### 问题 2：点击按钮后面板没有反应

**解决方案**：
1. 打开开发者工具（按 F12）
2. 查看控制台是否有错误信息
3. 查找以 `[QuickReply]` 开头的日志
4. 如果有错误，请截图并报告

### 问题 3：模板无法保存

**解决方案**：
- 确保已选择账号
- 检查模板内容是否符合要求（标签不能为空）
- 查看控制台错误信息

### 问题 4：发送失败

**解决方案**：
- 确保 WhatsApp Web 已加载完成
- 确保已选择聊天对象
- 检查网络连接
- 查看控制台错误信息

## 开发者调试

如果需要调试快捷回复功能，可以：

1. **查看日志**：
   - 打开开发者工具（F12）
   - 在控制台中查找 `[QuickReply]` 开头的日志

2. **测试 IPC 通信**：
   ```javascript
   // 在开发者工具控制台中执行
   window.electronAPI.quickReply.load('account-id')
     .then(data => console.log('加载成功:', data))
     .catch(err => console.error('加载失败:', err));
   ```

3. **检查存储**：
   - 快捷回复数据存储在：`session-data/{account-id}/quick-reply/`
   - 模板文件：`templates.json`
   - 分组文件：`groups.json`
   - 配置文件：`config.json`

## 数据位置

快捷回复数据按账号隔离存储：

```
session-data/
  └── {account-id}/
      └── quick-reply/
          ├── templates.json    # 模板数据
          ├── groups.json       # 分组数据
          ├── config.json       # 配置数据
          └── media/            # 媒体文件
              ├── images/
              ├── audio/
              └── video/
```

## 技术支持

如果遇到问题：

1. 查看本文档的故障排除部分
2. 查看开发者工具控制台的错误信息
3. 查看 `src/quick-reply/USER_GUIDE.md` 获取更详细的使用说明
4. 查看 `src/quick-reply/API_DOCUMENTATION.md` 了解技术细节

## 更新日志

- **v1.0.0** (2024-12-09)
  - ✅ 完成快捷回复功能集成
  - ✅ 支持所有媒体类型
  - ✅ 集成翻译服务
  - ✅ 集成 WhatsApp Web
  - ✅ 账号级数据隔离
  - ✅ 完整的管理界面
